import{_ as t,a,b as e}from"./ChD7ALq8.js";import{b as s,a as o}from"./BldM8smv.js";import{a as n,b as r}from"./BAEYAcPn.js";import{_ as i}from"./Dzm8wEly.js";import{_ as l}from"./CR3DKgTG.js";import{b as m,i as u,E as d,p}from"#entry";import"./DcG7fsXR.js";import{E as c}from"./CFYkxgLl.js";import"./DB73lsPL.js";import"./BJRWvqRU.js";import"./BtYC6QiT.js";import{a as _}from"./CS4BbyYM.js";import{u as b}from"./DxlzRKXL.js";import{u as f}from"./CBCYgbPi.js";import{n as g}from"./BCDbp3Va.js";import{e as h}from"./i7bVKOMs.js";import{m as y}from"./CJ2o-4Cd.js";import{l as x,b as w,r as j,y as v,an as N,X as V,u as T,U as k,a5 as L,W as U,H as z,a6 as H,d as W,A as B,G as R,am as C,af as E,ag as S,$,a0 as A}from"./BlNbczg5.js";import"./BR4u0AuH.js";import"./D4Cy1SFj.js";import"./DYUhSIt8.js";import"./DIG7BEjY.js";import"./C3eE3r0H.js";import"./Bn2zzhja.js";import"./DjCICVZF.js";import"./BCo6x5W8.js";import"./2SbQP43z.js";import"./B4uwOkQJ.js";const D=x({__name:"index",setup(x){const{t:D}=m(),{isMobile:I}=b(),M=w(),P=j({statusList:[{status:1,num:0,text:D("active")},{status:2,num:2,text:D("disabled")},{status:3,num:1,text:D("unsettled")},{status:7,num:3,text:D("pending_risk_review")},{status:8,num:5,text:D("pending_settlement")},{status:9,num:5,text:D("in_grace_period")},{status:100,num:5,text:D("pending_closure")},{status:101,num:4,text:D("closed")},{status:201,num:4,text:D("any_active")},{status:202,num:4,text:D("any_closed")}],disableList:{0:D("none"),1:D("ads_integrity_policy"),2:D("ads_ip_review"),3:D("risk_payment"),4:D("gray_account_shut_down"),5:D("ads_afc_review"),6:D("business_integrity_rar"),7:D("permanent_close"),8:D("unused_reseller_account"),9:D("unused_account"),10:D("umbrella_ad_account"),11:D("business_manager_integrity_policy"),12:D("misrepresented_ad_account"),13:D("aoab_deshare_legal_entity"),14:D("ctx_thread_review"),15:D("compromised_ad_account")}}),X=t=>{"string"==typeof t&&(t=Number.parseInt(t));const a=P.statusList.find(a=>a.status===t);return{num:a?.num,text:a?.text||""}},F=j({data:{account:"",account_name:"",time:["",""],state:"",status:"",bm_id:""},config:[{column:{label:D("ad_name"),prop:"account_name"},placeholder:D("ad_name"),width:"160",filterType:1},{column:{label:D("account_id"),prop:"account"},placeholder:D("account_id"),width:"160",filterType:1},{column:{label:D("status"),prop:"status"},placeholder:D("status"),width:"100",filterType:1},{column:{label:D("bm_id"),prop:"bm_id"},placeholder:D("bm_id"),width:"100",filterType:1}],hideBtn:!1,searchNum:0}),G=j({money:[]}),J=j({data:[],tableHeader:[{type:"selection",width:"45",other:{isHide:!0}},{property:"ad_name",label:D("ad_name"),minWidth:"180",sortable:!0},{property:"ad_account_id",label:D("account_id"),width:"180"},{property:"account",label:D("bm_name"),width:"180"},{property:"role",label:D("bm_id"),width:"150",align:"left"},{property:"business_country_code",label:D("country"),width:"180"},{property:"status",label:D("status"),width:"180"},{property:"balance",label:D("balance"),width:"130",sortable:!0},{property:"spend_cap",label:D("spend_cap"),width:"160",sortable:!0},{property:"amount_spent",label:D("amount_spent"),width:"160",sortable:!0},{property:"remaining_amount",label:D("remaining_amount"),minWidth:"190",sortable:!0},{property:"disable_reason",label:D("disable_reason"),minWidth:"180"},{property:"timezone_name",label:D("timezone name"),width:"220"},{property:"operate",label:D("action"),width:"120",align:"left",fixed:"right",other:{isHide:!0}}],pagination:u(p),isTool:!0,hideButton:{add:!0,delete:!0}}),[K,O]=f(async t=>{const a={account_id:F.data.account.trim(),account_name:F.data.account_name.trim(),bm_id:F.data.bm_id.trim(),account_status:F.data.status,page:J.pagination.page,limit:J.pagination.pageSize};a.account_id||delete a.account_id,a.account_name||delete a.account_name,a.bm_id||delete a.bm_id,""===a.account_status&&delete a.account_status,"search"===t&&(a.account_id||a.account_name||a.bm_id||a.account_status)&&(a.page=1);const e=await _(a);if(console.log("res :>> ",e),200!==e.code)return d.error(e.msg);F.searchNum=(F.searchNum||0)+1,J.data=e.data.list.map(t=>({...t,remaining_amount:g(Number(t.balance)-Number(t.amount_spent),4)})),J.pagination.page=a.page||1,J.pagination.total=e.data.total||0}),q=()=>{K("search")},Q=()=>{K()},Y=(t,a)=>{let e=J.data;if("all"===t.range||"selected"===t.range&&(e=a),0===e.length)return d.error(D("no_data_export_message"));const s=t.filename||`account_${Date.now()}`;h(e,`${s+t.suffix}`)},Z=()=>{c.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:D("confirm"),message:y(D("export_data_message"),D("export_data")),buttonSize:"large",center:!1,customClass:"la-message-box export-message"}).then(async()=>{Y({suffix:".xlsx",range:"current"},J.data)}).catch(()=>{})};return v(()=>{K()}),(m,u)=>{const d=t,p=s,c=e,_=r,b=n,f=a,g=i,h=o,y=l,x=N("loadings");return V((k(),L(y,{class:"hei"},{default:U(()=>[z(d,{class:"text-24px"}),T(I)?(k(),L(p,{key:0,class:"mb15px w100%",onClick:Z})):H("",!0),z(h,{ref_key:"tableRef",ref:M,option:T(J),"onUpdate:option":u[0]||(u[0]=t=>W(J)?J.value=t:null),onRefresh:T(K),onExport:Y,onPagination:u[1]||(u[1]=t=>T(K)())},{spend_cap:U(({row:t})=>[$(A(0===Number(t.spend_cap)?"-":t.spend_cap),1)]),disable_reason:U(({row:t})=>[$(A(T(P).disableList[t.disable_reason]),1)]),status:U(({row:t})=>[z(g,E(S(X(t.ad_account_status))),null,16)]),default:U(()=>[z(f,{option:T(F),rules:T(G),onSearch:q,onReset:Q},{time:U(({row:t})=>[z(c,{modelValue:t.time,"onUpdate:modelValue":a=>t.time=a,teleported:!1},null,8,["modelValue","onUpdate:modelValue"])]),status:U(({row:t})=>[z(b,{modelValue:t.status,"onUpdate:modelValue":a=>t.status=a,teleported:!1,clearable:""},{default:U(()=>[(k(!0),B(R,null,C(T(P).statusList,t=>(k(),L(_,{key:t.status,label:t.text,value:t.status},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["option","rules"])]),_:1},8,["option","onRefresh"])]),_:1})),[[x,T(O)]])}}});export{D as default};
