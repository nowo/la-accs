import{m as e,a2 as a,b as t,aU as u,aF as s,n as l}from"#entry";import{u as n}from"./DxlzRKXL.js";import{n as r,i}from"./BlNbczg5.js";const v=()=>{const v=e(),o=a().getRoutes(),{isCurrentFullscreen:h,themeConfig:p}=n(),{locale:m,t:c}=t(),f=r(()=>{const e=`___${m.value}`;return o.filter(a=>!(!a.name.endsWith(e)||!a?.meta?.visible)).map(e=>{const a=e.meta.key;return e.meta.title=a?c(a):e.meta.title||e.name,e.meta.sort=e.meta.sort||0,e}).sort((e,a)=>Number(e.meta?.sort??0)-Number(a.meta?.sort??0))}),d=u("adminMenu",[]);Array.isArray(d.value)?(d.value=[...new Set(d.value)],d.value.includes(s)||d.value.unshift(s)):d.value=[s],p.value.isTagsView&&f.value.find(e=>e.path===v.path)&&!d.value.includes(v.path)&&d.value.push(v.path);const g=r(()=>{const e=Array.isArray(d.value)?d.value:[],a=[];return e.forEach(e=>{const t=f.value.find(a=>a.path===e);t&&a.push(t)}),a}),y=i("reload");return{tagMenuList:g,adminRoutes:f,storageMenuList:d,updateStoreMenuList:(e,a)=>{if(!p.value.isTagsView)return;const t=d.value.findIndex(a=>a===e.path);if(2===a?t>=0&&d.value.splice(t,1):t<0&&d.value.push(e.path),!d.value.includes(v.path))if(t<d.value.length-1)l(g.value[t]);else{const e=g.value[g.value.length-1];l(e)}},setStoreMenuList:(e,a)=>{Array.isArray(d.value)||(d.value=[]);const t=d.value.findIndex(e=>e===a.path),u=g.value.filter(e=>e.meta?.isAffix).map(e=>e.path);if(1===e)v.path===a.path?y?.():l(a);else if(2===e){if(d.value.length<=1)return;t>=0&&d.value.splice(t,1);const e=g.value[g.value.length-1];e&&l(e)}else if(3===e)u.includes(a.path)||u.push(a.path),d.value=u,l(a);else if(4===e){d.value=u;const e=g.value[g.value.length-1];l(e)}else 5===e&&(l(a),h.value=!0)}}};function o(e){return!0}export{o as c,v as u};
