import{_ as e,a,b as t}from"./BMH5tsOX.js";import{b as o,a as s,E as l,c as r}from"./AUOr1KTC.js";import{a as n,b as p,E as d}from"./Bk5xpA7T.js";import{E as i}from"./H667Tzrd.js";import{_ as m}from"./CxyZTgN7.js";import{E as u}from"./BxaPDu9A.js";import{_ as c}from"./CzcZBNyS.js";import{b as f,i as h,j as y,E as _,p as b}from"#entry";import"./CaAwZgye.js";import{E as g}from"./BvW5L1cR.js";import"./B20wI0mL.js";import{c as j}from"./DZVjPFkO.js";import{u as w}from"./DxlzRKXL.js";import{b as x}from"./CBCYgbPi.js";import{m as V}from"./CJ2o-4Cd.js";import{e as k}from"./i7bVKOMs.js";import{l as v,b as U,r as C,n as E,a5 as T,U as z,W as S,H as $,a6 as B,u as H,d as M,Y as P,$ as A,a0 as I,A as R,G as D,am as N,Z as W,_ as F}from"./BlNbczg5.js";import{_ as G}from"./BCo6x5W8.js";import"./CyAy8uu6.js";import"./D4Cy1SFj.js";import"./DYUhSIt8.js";import"./DIG7BEjY.js";import"./DbH7GBFV.js";import"./DPNR9bvN.js";import"./BnM2IXaE.js";import"./Cw9gdpBr.js";import"./B4uwOkQJ.js";const J={class:"flex items-center"},K={class:"w100% flex items-center"},L=G(v({__name:"index",setup(v){const{t:G}=f(),{isMobile:L}=w(),{statusConfig:O}=x(),X=U();C({});const Y=C({data:{account:"",title:"",time:["",""],state:"",status:[],dateType:"",spend:[],spendStart:"",spendEnd:""},config:[{column:{label:G("account_id"),prop:"title"},placeholder:G("account_id"),width:"160"},{column:{label:G("account_name"),prop:"account"},placeholder:G("account_name"),width:"160"},{column:{label:G("usd_spend"),prop:"spend"}},{column:{label:G("report_date"),prop:"time"}},{column:{label:G("status"),prop:"status"},placeholder:"",width:"100"},{column:{label:G("dates"),prop:"dateType"},placeholder:"",width:"100"}],hideBtn:!1}),Z=C({money:[]}),q=C({data:[],tableHeader:[{property:"",label:"",type:"selection",width:"100",other:{isHide:!0}},{property:"id",label:G("account_id"),width:"180",sortable:!0},{property:"username",label:G("account_name"),minWidth:"180"},{property:"status",label:G("status"),width:"150"},{property:"account",label:G("usd_spend"),width:"180"},{property:"role",label:G("spend"),width:"150"},{property:"status",label:G("country"),width:"180"},{property:"status",label:G("rate"),width:"140"},{property:"created_at",label:G("report_date"),width:"220"},{property:"created_at",label:G("utc"),width:"220"}],pagination:h(b),isTool:!0,hideButton:{delete:!0,add:!0}}),Q=E({get:()=>Y.data.status.map(e=>O.value.find(a=>a.key===e)),set:e=>{Y.data.status=e.map(e=>e.key)}}),ee=Array.from({length:100}).fill(0).map((e,a)=>({id:a+1,username:`14ETVC-0521-3233-${a}`,account:`zhangsan${a}`,role:"管理员",status:Math.floor(4*Math.random()),created_at:`2022-01-01 12:00:${a+1}`})),ae=async()=>{const e=ee.slice(q.pagination.pageSize*(q.pagination.page-1),q.pagination.pageSize*q.pagination.page);q.data=e,q.pagination.total=ee.length},te=()=>{ae()},oe=()=>{ae()},se=()=>{g.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:G("confirm"),message:V(G("export_data_message"),G("export_data")),buttonSize:"large",center:!1,customClass:"la-message-box export-message"}).then(async()=>{(e=>{let a=q.data;if(0===a.length)return _.error("No data to export");const t=e.filename||`consumption_${Date.now()}`;k(a,`${t+e.suffix}`)})({suffix:".xlsx"},q.data)}).catch(()=>{})};return ae(),(f,h)=>{const b=e,w=o,x=d,k=p,v=n,U=r,C=l,E=i,ee=t,le=a,re=m,ne=u,pe=s,de=c;return z(),T(de,{class:"hei"},{default:S(()=>[$(b,{class:"text-24px"}),H(L)?(z(),T(w,{key:0,class:"mb15px w100%",onClick:se})):B("",!0),$(pe,{ref_key:"tableRef",ref:X,option:H(q),"onUpdate:option":h[1]||(h[1]=e=>M(q)?q.value=e:null),"hide-button":{add:!0,delete:!0},size:"large",onRefresh:ae,onPagination:ae},{status:S(({row:e})=>[$(re,{num:e.status},null,8,["num"])]),operate:S(({row:e})=>[("checkPermission"in f?f.checkPermission:H(j))("del")?(z(),T(ne,{key:0,type:"danger",link:"",onClick:a=>(e=>{g.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:G("delete"),message:V(G("delete_seller_message"),G("delete_seller")),buttonSize:"large",center:!1,customClass:"message-box-error"}).then(async()=>{const a=await y("/api/v1/product/delete",{method:"post",body:{id:e.id}});if(200!==a.code)return _.error(a.msg);_.success("删除成功"),ae()}).catch(()=>{})})(e)},{default:S(()=>[...h[3]||(h[3]=[A(" 删除 ",-1)])]),_:1},8,["onClick"])):B("",!0)]),default:S(()=>[$(le,{option:H(Y),"onUpdate:option":h[0]||(h[0]=e=>M(Y)?Y.value=e:null),rules:H(Z),onSearch:te,onReset:oe},{status:S(({row:e})=>[$(v,{modelValue:e.status,"onUpdate:modelValue":a=>e.status=a,multiple:"",teleported:!1,"fit-input-width":"",offset:5},{tag:S(()=>[(z(!0),R(D,null,N(H(Q),e=>(z(),T(x,{key:e?.key,class:F(`tag-status-${e.type}`),type:"primary",effect:"light",closable:"",onClose:a=>(e=>{const a=Y.data.status.findIndex(a=>a===e);a>=0&&Y.data.status.splice(a,1)})(e.key)},{default:S(()=>[A(I(e?.value),1)]),_:2},1032,["class","onClose"]))),128))]),default:S(()=>[(z(!0),R(D,null,N(H(O),e=>(z(),T(k,{key:e.key,label:e.value,value:e.key},{default:S(()=>[P("div",J,[$(x,{color:e.color,class:"mr8px min-w-25px op-70% h25px! b-0!"},null,8,["color"]),P("span",{style:W({color:e.color})},I(e.value),5)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),dateType:S(({row:e})=>[$(C,{modelValue:e.dateType,"onUpdate:modelValue":a=>e.dateType=a,size:"large"},{default:S(()=>[$(U,{label:"0"},{default:S(()=>[A(I(H(G)("each_day")),1)]),_:1}),$(U,{label:"1"},{default:S(()=>[A(I(H(G)("whole")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),spend:S(({row:e})=>[P("div",K,[$(E,{modelValue:e.spendStart,"onUpdate:modelValue":a=>e.spendStart=a,type:"number",placeholder:H(G)("spend_start")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),h[2]||(h[2]=P("span",{class:"px8px"},"-",-1)),$(E,{modelValue:e.spendEnd,"onUpdate:modelValue":a=>e.spendEnd=a,type:"number",placeholder:H(G)("spend_end")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),time:S(({row:e})=>[$(ee,{modelValue:e.time,"onUpdate:modelValue":a=>e.time=a,teleported:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["option","rules"])]),_:1},8,["option"])]),_:1})}}}),[["__scopeId","data-v-5f29306a"]]);export{L as default};
